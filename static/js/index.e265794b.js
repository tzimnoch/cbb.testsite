(()=>{"use strict";var e,a,r,s,t={247:function(e,a,r){var s=r(848),t=r(540),n=r(338);let i="flex-FadE0K",c=function(e){let{dispatchGameState:a,gs:r}=e,n=(0,t.useRef)();return(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Buttons"}),(0,s.jsx)("button",{onClick:e=>a({type:"saveToLocal"}),children:"Save Local"}),(0,s.jsx)("button",{onClick:e=>a({type:"loadFromLocal"}),children:"Load Local"}),(0,s.jsx)("button",{onClick:e=>a({type:"saveToFile"}),disabled:!0,children:"Save to file"}),(0,s.jsx)("button",{onClick:e=>a({type:"loadFromFile"}),disabled:!0,children:"Load from file"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("label",{htmlFor:"hvstring",children:"Handviewer String: "}),(0,s.jsx)("input",{id:"hvstring",type:"text",ref:n}),(0,s.jsx)("button",{onClick:e=>a({type:"loadFromHandviewer",handviewer_string:n.current.value}),children:"Load from handviewer"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{onClick:e=>a({type:"rotateHands"}),children:"Rotate clockwise"}),(0,s.jsx)("button",{onClick:()=>a({type:"generateBridgewinnersHandviewerString"}),children:"Generate Bridgewinners handviewer"}),(0,s.jsx)("p",{children:r.handviewer_string?r.handviewer_string+" ✅ copied":""})]})},o=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.reduce((e,a)=>e.flatMap(e=>a.map(a=>d(e,a))))}(["spades","hearts","diamonds","clubs"],[12,11,10,9,8,7,6,5,4,3,2,1,0]);function d(e,a){return{suit:e,value:a}}function l(e,a){var r=e.findIndex(e=>e.suit==a.suit&&e.value==a.value);return r>-1&&e.splice(r,1),e}let u=["2","3","4","5","6","7","8","9","t","j","q","k","a"],h=e=>u[e],p=(e,a)=>a-e,m=e=>function(a){if(a.suit==e)return a.value};function v(e){var a=null,r=[];for(var s of e.split(""))switch(s){case"c":a="clubs";break;case"d":a="diamonds";break;case"h":a="hearts";break;case"s":a="spades";break;case"2":r.push(d(a,0));break;case"3":r.push(d(a,1));break;case"4":r.push(d(a,2));break;case"5":r.push(d(a,3));break;case"6":r.push(d(a,4));break;case"7":r.push(d(a,5));break;case"8":r.push(d(a,6));break;case"9":r.push(d(a,7));break;case"t":case"0":r.push(d(a,8));break;case"j":r.push(d(a,9));break;case"q":r.push(d(a,10));break;case"k":r.push(d(a,11));break;case"a":r.push(d(a,12))}return{hand:r}}let b="handviewer.html?",j="{ghand ",x={north:{hand:[]},west:{hand:[]},east:{hand:[]},south:{hand:[]},deck:o,play:[],board_number:null,vulnerability:"none",scoring:"matchpoints",active_player:"north",handviewer_string:null,phase:"edit"};function y(e,a){var r;switch(console.log("Action: "+JSON.stringify(a)),a.type){case"moveCard":return function(e){let{rank:a,suit:r,gameState:s}=e;if(null==r||null==s.active_player||null==a)return s;let t=d(r,a);return l(s.north.hand,t),l(s.south.hand,t),l(s.west.hand,t),l(s.east.hand,t),l(s.deck,t),{...s,[s.active_player]:{hand:[...s[s.active_player].hand,{suit:t.suit,value:t.value}]}}}({rank:a.rank,suit:a.suit,gameState:e});case"setActivePlayer":return{...e,active_player:a.player};case"rotateHands":return{...e,north:e.west,west:e.south,south:e.east,east:e.north};case"generateBridgewinnersHandviewerString":return r="{ghand "+("n=c"+e.north.hand.map(m("clubs")).sort(p).map(h).join("")+"d"+e.north.hand.map(m("diamonds")).sort(p).map(h).join("")+"h"+e.north.hand.map(m("hearts")).sort(p).map(h).join("")+"s"+e.north.hand.map(m("spades")).sort(p).map(h).join("")+"&s=c"+e.south.hand.map(m("clubs")).sort(p).map(h).join("")+"d"+e.south.hand.map(m("diamonds")).sort(p).map(h).join("")+"h"+e.south.hand.map(m("hearts")).sort(p).map(h).join("")+"s"+e.south.hand.map(m("spades")).sort(p).map(h).join("")+"&e=c"+e.east.hand.map(m("clubs")).sort(p).map(h).join("")+"d"+e.east.hand.map(m("diamonds")).sort(p).map(h).join("")+"h"+e.east.hand.map(m("hearts")).sort(p).map(h).join("")+"s"+e.east.hand.map(m("spades")).sort(p).map(h).join("")+"&w=c"+e.west.hand.map(m("clubs")).sort(p).map(h).join("")+"d"+e.west.hand.map(m("diamonds")).sort(p).map(h).join("")+"h"+e.west.hand.map(m("hearts")).sort(p).map(h).join("")+"s"+e.west.hand.map(m("spades")).sort(p).map(h).join(""))+"}",navigator.clipboard.writeText(r),{...e,handviewer_string:r};case"saveToLocal":return localStorage.setItem("cbb_gamestate",JSON.stringify(e)),e;case"loadFromLocal":return JSON.parse(localStorage.getItem("cbb_gamestate"));case"loadFromHandviewer":return function(e,a){let r=a.indexOf(b),s=a.indexOf(j);if(r>-1)a=a.slice(r+b.length);else{if(!(s>-1))return e;a=a.slice(s+j.length)}var e=x;for(var t of a.split("&"))switch(t.charAt(0)){case"n":e={...e,north:v(t.slice(2))};break;case"e":e={...e,east:v(t.slice(2))};break;case"w":e={...e,west:v(t.slice(2))};break;case"s":e={...e,south:v(t.slice(2))};break;case"b":e={...e,board_number:t.slice(2)}}return e}(e,a.handviewer_string);case"saveToFile":case"loadFromFile":default:return e;case"setBoardNumber":return{...e,board_number:a.board_number}}}let k=["2","3","4","5","6","7","8","9","T","J","Q","K","A"],f=e=>k[e],w=(e,a)=>a-e,g=e=>function(a){if(a.suit==e)return a.value};function C(e){let{hand:a,direction:r,active:t}=e;var n=["hand-LODQQp"];t&&n.push("active-Z2Wclc");var i=["player-_WUpGy"];return((e,a)=>{switch(e){case"none":default:return!1;case"all":return!0;case"ns":return"north"==a||"south"==a;case"ew":return"east"==a||"west"==a}})("ns",r)&&i.push("vulnerable-Qx9qCP"),(0,s.jsxs)("div",{className:n.join(" "),children:[(0,s.jsx)("div",{className:i.join(" "),children:r}),(0,s.jsxs)("p",{children:["♠ ",a.map(g("spades")).sort(w).map(f)]}),(0,s.jsxs)("p",{children:["♥ ",a.map(g("hearts")).sort(w).map(f)]}),(0,s.jsxs)("p",{children:["♦ ",a.map(g("diamonds")).sort(w).map(f)]}),(0,s.jsxs)("p",{children:["♣ ",a.map(g("clubs")).sort(w).map(f)]})]})}function _(){return(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Instructions"}),(0,s.jsxs)("p",{children:["Use arrow keys to navigate between north, south, east and west. Select suit with ",(0,s.jsx)("u",{children:"S"}),"pades, ",(0,s.jsx)("u",{children:"H"}),"earts,",(0,s.jsx)("u",{children:"D"}),"iamonds and ",(0,s.jsx)("u",{children:"C"}),"lubs. Then select the cards."]})]})}var N=null;n.createRoot(document.getElementById("root")).render((0,s.jsx)(t.StrictMode,{children:(0,s.jsx)(()=>{let[e,a]=(0,t.useReducer)(y,x),r=(0,t.useCallback)(e=>{e&&e.focus()});return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"content-Fp5dVd",onKeyUp:e=>{!function(e){let{event:a,dispatchGameState:r}=e;if(!a.ctrlKey&&!a.altKey)switch(console.log("keypressed: "+a.key),a.key){case"ArrowDown":return r({type:"setActivePlayer",player:"south"});case"ArrowUp":return r({type:"setActivePlayer",player:"north"});case"ArrowLeft":return r({type:"setActivePlayer",player:"west"});case"ArrowRight":return r({type:"setActivePlayer",player:"east"});case"S":case"s":return N="spades";case"H":case"h":return N="hearts";case"D":case"d":return N="diamonds";case"C":case"c":return N="clubs";case"A":case"a":return r({type:"moveCard",rank:12,suit:N});case"K":case"k":return r({type:"moveCard",rank:11,suit:N});case"Q":case"q":return r({type:"moveCard",rank:10,suit:N});case"J":case"j":return r({type:"moveCard",rank:9,suit:N});case"T":case"t":return r({type:"moveCard",rank:8,suit:N});case"9":return r({type:"moveCard",rank:7,suit:N});case"8":return r({type:"moveCard",rank:6,suit:N});case"7":return r({type:"moveCard",rank:5,suit:N});case"6":return r({type:"moveCard",rank:4,suit:N});case"5":return r({type:"moveCard",rank:3,suit:N});case"4":return r({type:"moveCard",rank:2,suit:N});case"3":return r({type:"moveCard",rank:1,suit:N});case"2":return r({type:"moveCard",rank:0,suit:N})}}({event:e,dispatchGameState:a})},tabIndex:"1",ref:r,children:[(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)("div",{className:i,children:(0,s.jsxs)("p",{children:[(0,s.jsx)("label",{htmlFor:"boardnumber",children:"Board Number: "}),(0,s.jsx)("select",{name:"boardnumber",id:"boardnumber",onChange:e=>a({type:"setBoardNumber",board_number:e.target.value}),children:[...Array(36)].map((e,a)=>(0,s.jsx)("option",{value:a+1,children:a+1},a+1))})]})}),(0,s.jsx)("div",{className:i,children:(0,s.jsx)(C,{hand:e.north.hand,direction:"north",active:"north"==e.active_player})}),(0,s.jsx)("div",{className:i})]}),(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)("div",{className:i,children:(0,s.jsx)(C,{hand:e.west.hand,direction:"west",active:"west"==e.active_player})}),(0,s.jsx)("div",{className:i,children:(0,s.jsx)(C,{hand:e.deck,direction:"center"})}),(0,s.jsx)("div",{className:i,children:(0,s.jsx)(C,{hand:e.east.hand,direction:"east",active:"east"==e.active_player})})]}),(0,s.jsxs)("div",{className:i,children:[(0,s.jsx)("div",{className:i}),(0,s.jsx)("div",{className:i,children:(0,s.jsx)(C,{hand:e.south.hand,direction:"south",active:"south"==e.active_player})}),(0,s.jsx)("div",{className:i})]})]}),(0,s.jsx)(c,{dispatchGameState:a,gs:e}),(0,s.jsx)(_,{})]})},{})}))}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),e=[],i.O=(a,r,s,t)=>{if(r){t=t||0;for(var n=e.length;n>0&&e[n-1][2]>t;n--)e[n]=e[n-1];e[n]=[r,s,t];return}for(var c=1/0,n=0;n<e.length;n++){for(var[r,s,t]=e[n],o=!0,d=0;d<r.length;d++)(!1&t||c>=t)&&Object.keys(i.O).every(e=>i.O[e](r[d]))?r.splice(d--,1):(o=!1,t<c&&(c=t));if(o){e.splice(n--,1);var l=s();void 0!==l&&(a=l)}}return a},a={410:0},i.O.j=e=>0===a[e],r=(e,r)=>{var s,t,[n,c,o]=r,d=0;if(n.some(e=>0!==a[e])){for(s in c)i.o(c,s)&&(i.m[s]=c[s]);if(o)var l=o(i)}for(e&&e(r);d<n.length;d++)t=n[d],i.o(a,t)&&a[t]&&a[t][0](),a[t]=0;return i.O(l)},(s=self.webpackChunkcbbtools=self.webpackChunkcbbtools||[]).forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s));var c=i.O(void 0,["783"],function(){return i(247)});c=i.O(c)})();